<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Response Reflection</title>
    <link rel="stylesheet" href="../../css/content.css">
    <script src="../../js/switchContent.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch('../../template/header.html')
                .then(response => response.text())
                .then(data => document.getElementById('header').innerHTML = data);

            fetch('../../template/footer.html')
                .then(response => response.text())
                .then(data => document.getElementById('footer').innerHTML = data);
        });
    </script>
    <style>
        .switch-buttons {
            margin-bottom: 10px;
        }

        .switch-buttons button {
            padding: 8px 16px;
            margin-right: 5px;
            border: none;
            background: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .switch-buttons button.active {
            background: #0056b3;
        }

        .switch-buttons button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div id="header"></div>

    <div class="container mt-5">
        <h1 class="mb-4">AI Response Reflection</h1>

        <section>
            <div class="switch-buttons">
                <button id="btnCode" class="active" onclick="switchContent('code')">Code</button>
                <button id="btnUsage" onclick="switchContent('usage')">Usage</button>
            </div>

            <div id="codeContent">
                <pre class="code-block"><code>/**
 * Sends a message to the AI and returns the AI's response.
 *
 * @param message The message or prompt to send to the AI.
 * @return The response generated by the AI model.
 */
public String getResponse(String message) {
    return ai.getResponse(message);
}</code></pre>
            </div>

            <!-- USAGE CONTENT -->
            <div id="usageContent" style="display: none;">
                <div class="usage-container">
                    <h2>How to Use</h2>
                    <ul>
                        <li>Get the <code>MCEngineArtificialIntelligence</code> plugin instance using <code>Bukkit.getPluginManager().getPlugin("MCEngineArtificialIntelligence")</code>.</li>
                        <li>Cast the plugin to <code>MCEngineArtificialIntelligenceSpigotMC</code> to access <code>getApi()</code>.</li>
                        <li>Call methods from the <code>MCEngineArtificialIntelligenceApi</code> instance.</li>
                        <li>Add <code>depend: [MCEngineArtificialIntelligence]</code> in your <code>plugin.yml</code> to ensure load order.</li>
                    </ul>
                    <h2>Example Usage</h2>
                    <pre class="code-block"><code>public class ExamplePlugin extends JavaPlugin {
    private MCEngineArtificialIntelligenceApi aiApi;

    @Override
    public void onEnable() {
        Plugin plugin = Bukkit.getPluginManager().getPlugin("MCEngineArtificialIntelligence");

        if (plugin == null || !(plugin instanceof MCEngineArtificialIntelligenceSpigotMC)) {
            getLogger().severe("MCEngineArtificialIntelligence plugin not found!");
            getServer().getPluginManager().disablePlugin(this);
            return;
        }

        MCEngineArtificialIntelligenceSpigotMC aiPlugin = (MCEngineArtificialIntelligenceSpigotMC) plugin;
        aiApi = aiPlugin.getApi();

        if (aiApi == null) {
            getLogger().severe("AI API is null!");
            getServer().getPluginManager().disablePlugin(this);
            return;
        }

        getLogger().info("AI API loaded!");

        String response = aiApi.getResponse("Hello AI!");
        getLogger().info("AI Response: " + response);
    }
}</code></pre>
                    <h2>plugin.yml</h2>
                    <pre class="code-block"><code>name: ExamplePlugin
main: io.github.mcengine.example.ExamplePlugin
version: 1.0.0
depend: [MCEngineArtificialIntelligence]</code></pre>
                </div>
            </div>
        </section>

        <section>
            <h2>Reflection</h2>
            <div class="reflection-container">
                <div class="reflection-box">1. <strong>Method:</strong> getResponse</div>
                <div class="reflection-box">2. <strong>Param:</strong> message (String)</div>
                <div class="reflection-box">3. <strong>Return:</strong> String (AI response)</div>
                <div class="reflection-box">4. <strong>Uses:</strong> ai.getResponse()</div>
                <div class="reflection-box">5. <strong>Purpose:</strong> Send prompt to AI</div>
                <div class="reflection-box">6. <strong>Encapsulation:</strong> Private ai object</div>
                <div class="reflection-box">7. <strong>Pattern:</strong> Delegation</div>
                <div class="reflection-box">8. <strong>Assumption:</strong> ai implements getResponse()</div>
                <div class="reflection-box">9. <strong>Error handling:</strong> None in this code</div>
                <div class="reflection-box">10. <strong>Alternative:</strong> Add validation</div>
            </div>
        </section>

        <section>
            <h2>Explanation</h2>
            <p>The <code>getResponse</code> method acts as a <strong>wrapper</strong> or <strong>facade</strong> around the <code>ai.getResponse</code> call. It takes a <code>message</code> (String), passes it directly to the AI object, and returns whatever the AI responds with.</p>
            <ul>
                <li>✅ No additional processing or validation is performed inside this method.</li>
                <li>✅ The method's purpose is to abstract the AI response mechanism from the caller.</li>
                <li>✅ It relies on the <code>ai</code> object already being initialized with a valid AI implementation.</li>
            </ul>
        </section>
    </div>

    <div id="footer"></div>
</body>
</html>
