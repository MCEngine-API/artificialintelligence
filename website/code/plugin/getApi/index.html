<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI API Usage</title>
    <link rel="stylesheet" href="../../../css/content.css">
    <script src="../../../js/switchContent.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            fetch('../../../template/header.html')
                .then(response => response.text())
                .then(data => document.getElementById('header').innerHTML = data);

            fetch('../../../template/footer.html')
                .then(response => response.text())
                .then(data => document.getElementById('footer').innerHTML = data);
        });
    </script>
    <style>
        .switch-buttons {
            margin-bottom: 10px;
        }

        .switch-buttons button {
            padding: 8px 16px;
            margin-right: 5px;
            border: none;
            background: #007bff;
            color: white;
            border-radius: 4px;
            cursor: pointer;
        }

        .switch-buttons button.active {
            background: #0056b3;
        }

        .switch-buttons button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div id="header"></div>

    <div class="container mt-5">
        <h1 class="mb-4">AI API Usage</h1>

        <section>
            <div class="switch-buttons">
                <button id="btnCode" class="active" onclick="switchContent('code')">Code</button>
                <button id="btnUsage" onclick="switchContent('usage')">Usage</button>
            </div>

            <div id="codeContent">
                <pre class="code-block"><code>/**
 * Gets the API instance associated with this plugin.
 *
 * @return The MCEngineArtificialIntelligenceApi instance.
 */
public MCEngineArtificialIntelligenceApi getApi() {
    return api;
}</code></pre>
            </div>

            <!-- USAGE CONTENT -->
            <div id="usageContent" style="display: none;">
                <div class="usage-container">
                    <h2>How to Use</h2>
                    <ul>
                        <li>Retrieve the <code>MCEngineArtificialIntelligence</code> plugin via <code>Bukkit.getPluginManager().getPlugin("MCEngineArtificialIntelligence")</code>.</li>
                        <li>Cast the plugin to <code>MCEngineArtificialIntelligenceSpigotMC</code> to access <code>getApi()</code>.</li>
                        <li>Use the returned <code>MCEngineArtificialIntelligenceApi</code> instance to interact with the AI system.</li>
                        <li>Remember to declare <code>depend: [MCEngineArtificialIntelligence]</code> in your <code>plugin.yml</code>.</li>
                    </ul>
                    <h2>Example Usage</h2>
                    <pre class="code-block"><code>public class ExamplePlugin extends JavaPlugin {
    private MCEngineArtificialIntelligenceApi aiApi;

    @Override
    public void onEnable() {
        Plugin plugin = Bukkit.getPluginManager().getPlugin("MCEngineArtificialIntelligence");

        if (plugin == null || !(plugin instanceof MCEngineArtificialIntelligenceSpigotMC)) {
            getLogger().severe("AI plugin not found!");
            getServer().getPluginManager().disablePlugin(this);
            return;
        }

        MCEngineArtificialIntelligenceSpigotMC aiPlugin = (MCEngineArtificialIntelligenceSpigotMC) plugin;
        aiApi = aiPlugin.getApi();

        if (aiApi == null) {
            getLogger().severe("API is null!");
            getServer().getPluginManager().disablePlugin(this);
            return;
        }

        getLogger().info("AI API loaded!");
        // You can now use aiApi to call AI methods
    }
}</code></pre>
                    <h2>plugin.yml</h2>
                    <pre class="code-block"><code>name: ExamplePlugin
main: io.github.mcengine.example.ExamplePlugin
version: 1.0.0
depend: [MCEngineArtificialIntelligence]</code></pre>
                </div>
            </div>
        </section>

        <section>
            <h2>Reflection</h2>
            <div class="reflection-container">
                <div class="reflection-box">1. <strong>Method:</strong> getApi</div>
                <div class="reflection-box">2. <strong>Return:</strong> MCEngineArtificialIntelligenceApi</div>
                <div class="reflection-box">3. <strong>Access:</strong> Public</div>
                <div class="reflection-box">4. <strong>Encapsulation:</strong> Exposes api instance</div>
                <div class="reflection-box">5. <strong>Pattern:</strong> Getter</div>
                <div class="reflection-box">6. <strong>Dependency:</strong> Requires api initialized</div>
                <div class="reflection-box">7. <strong>Purpose:</strong> Provide API to external plugins</div>
                <div class="reflection-box">8. <strong>Assumption:</strong> api initialized before call</div>
                <div class="reflection-box">9. <strong>Risk:</strong> Null if initialization failed</div>
                <div class="reflection-box">10. <strong>Alternative:</strong> Add null check with Optional</div>
            </div>
        </section>

        <section>
            <h2>Explanation</h2>
            <p>The <code>getApi()</code> method is a <strong>public getter</strong> that exposes the private <code>api</code> field to other plugins. It allows external plugins to access the <code>MCEngineArtificialIntelligenceApi</code> instance initialized by this plugin.</p>
            <ul>
                <li>✅ Ensures encapsulation while still enabling controlled access.</li>
                <li>✅ The returned API object must be checked for <code>null</code> in case initialization failed.</li>
                <li>✅ Provides a clean integration point for other developers to build plugins dependent on the AI system.</li>
            </ul>
        </section>
    </div>

    <div id="footer"></div>
</body>
</html>
